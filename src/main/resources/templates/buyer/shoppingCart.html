<!--<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layouts/main}"
      xmlns:th="http://www.thymeleaf.org" >

<head>
    <title>Shopping Cart </title>
</head>

<body>
<section class="wrapper" layout:fragment="wrapper">
    <div class="col-lg-8">
        <div class="row">
    <h2>Shopping Cart</h2>
    <hr/>
    <h4>Please mark items you'd like to purchase</h4>

    <h5 th:if="${errorMessage} != null" th:text="${errorMessage}"></h5>

    <form th:action="@{/buyers/my-cart/make-purchase}" th:object="${itemsForCheckOut}" method="post" action="#">
        <div>
            <p th:each="cartItems :${cartItems}">
                <input type="checkbox" name="itemsForCheckOut" th:value="${cartItems}" th:text="${cartItems.product.name}">
                <span th:text="${cartItems.product.price}"/>
                <span th:text="${cartItems.product.quantity}"/>
                <a th:href="@{/buyers/my-cart/remove/{id}(id=${cartItems.id})}">Remove from Cart</a>
            </p>
        </div>
        <button class="btn btn-primary" type="submit">Purchase</button>
        <form action="https://google.com">
            <button class="btn btn-default" type="submit">Continue Shopping</button>
        </form>
    </form>
        </div>
    </div>
</section>-->


<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layouts/main}"
      xmlns:th="http://www.thymeleaf.org" >

<head>
    <title>Shopping Cart </title>
</head>

<body>
<section class="wrapper" layout:fragment="wrapper">
    <div class="col-lg-8">
        <div class="row">

<div layout:fragment="main-content" class="row" style="margin-left: 4%">
    <div  th:if="${errorMessage}">
        <p class="alert alert-danger" > <span th:text="${errorMessage}" th:remove="tag" ></span></p>
    </div>
    <div class="card"  style="width: 80%;">
        <h4>Shopping Cart</h4>
        <hr/>
        <div th:if="${not #lists.isEmpty(cartItems)}" class="card-body">
            <p>
                You have items in your shopping cart.
            </p>
            <form action="#" th:action="@{/buyers/my-cart/clear}" method="post">
                <input type="submit" class="float-right btn btn-danger btn-sm" value="Clear Shopping Cart"/>
            </form>
        </div>
        <div th:if="${#lists.isEmpty(cartItems)}">Your cart is empty...</div>
        <table th:if="${not #lists.isEmpty(cartItems)}" class="table">
            <thead>
                <tr>
                    <th></th>
                    <th>Product</th>
                    <th class="text-center" >Quantity</th>
                    <th class="text-right" >Price</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="cartItem :${cartItems}">
                    <td>
                        <img th:src="@{'/img/' + ${cartItem.product.imageIdentifier}}"  class="img-fluid img-thumbnail"
                             width="200" height="200"  alt="...">
                    </td>
                    <td th:text="${cartItem.product.description}" style="text-align: center; vertical-align: middle">Text ...</td>
                    <td class="text-center" th:text="${cartItem.product.quantity}" style="text-align: center; vertical-align: middle">Text ...</td>
                    <td class="text-right"th:text="${cartItem.product.price}" style="text-align: center; vertical-align: middle"> Text ...</td>
                    <td style="text-align: center; vertical-align: middle">
                        <form action="#" th:action="@{/buyers/my-cart/remove/{id}(id=${cartItem.id})}" method="post">
                            <input type="submit" value="Remove">
                        </form>
                    </td>
                </tr>
            </tbody>
            <tfoot>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th class="text-right"></th>
            </tr>
            <tr>
                <th colspan="4">
                    <form action="#" th:action="@{/buyers/my-cart/make-purchase}" method="post">
                        <input type="submit" value="Check Out">
                    </form>
                </th>
            </tr>
            </tfoot>
        </table>
    </div>
</div>
        </div>
    </div>
</section>
